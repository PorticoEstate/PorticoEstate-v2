{"version":3,"file":"suggestion.js","names":[],"sources":["../../src/suggestion.ts"],"sourcesContent":["import { UHTMLComboboxElement } from '@u-elements/u-combobox';\r\nimport { customElements, off, on, QUICK_EVENT } from './utils';\r\n\r\ndeclare global {\r\n  interface HTMLElementTagNameMap {\r\n    'ds-suggestion': DSSuggestionElement;\r\n  }\r\n}\r\n\r\nexport class DSSuggestionElement extends UHTMLComboboxElement {\r\n  connectedCallback() {\r\n    super.connectedCallback();\r\n    on(this, 'toggle', polyfillToggleSource, QUICK_EVENT);\r\n  }\r\n  disconnectedCallback() {\r\n    super.disconnectedCallback();\r\n    off(this, 'toggle', polyfillToggleSource, QUICK_EVENT);\r\n  }\r\n}\r\n\r\ncustomElements.define('ds-suggestion', DSSuggestionElement);\r\n\r\n// Since showPopover({ source }) is not supported in all browsers yet:\r\nfunction polyfillToggleSource({ target: el, newState }: Partial<ToggleEvent>) {\r\n  const id = newState === 'open' && el instanceof Element && el.id;\r\n  const detail = id && document.querySelector(`input[list=\"${el.id}\"]`);\r\n\r\n  if (detail) el.dispatchEvent(new CustomEvent('ds-toggle-source', { detail }));\r\n}\r\n"],"mappings":";;;;AASA,IAAa,sBAAb,cAAyC,qBAAqB;CAC5D,oBAAoB;AAClB,QAAM,mBAAmB;AACzB,KAAG,MAAM,UAAU,sBAAsB,YAAY;;CAEvD,uBAAuB;AACrB,QAAM,sBAAsB;AAC5B,MAAI,MAAM,UAAU,sBAAsB,YAAY;;;AAI1D,eAAe,OAAO,iBAAiB,oBAAoB;AAG3D,SAAS,qBAAqB,EAAE,QAAQ,IAAI,YAAkC;CAE5E,MAAM,SADK,aAAa,UAAU,cAAc,WAAW,GAAG,MACzC,SAAS,cAAc,eAAe,GAAG,GAAG,IAAI;AAErE,KAAI,OAAQ,IAAG,cAAc,IAAI,YAAY,oBAAoB,EAAE,QAAQ,CAAC,CAAC"}