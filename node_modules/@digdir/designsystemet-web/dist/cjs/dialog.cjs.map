{"version":3,"file":"dialog.cjs","names":["attr","onHotReload","on","QUICK_EVENT"],"sources":["../../src/dialog.ts"],"sourcesContent":["import { attr, on, onHotReload, QUICK_EVENT } from './utils';\r\n\r\n// Polyfill closedby functionaliy in Safari\r\n// Also in Safari 26.2 where `closedBy` property is supported natively,\r\n// but no corresponding functionality/behavior is implemented.\r\nlet DOWN_INSIDE = false; // Prevent close if selecting text inside dialog\r\nfunction handleClosedbyAny({\r\n  type,\r\n  target: el,\r\n  clientX: x = 0,\r\n  clientY: y = 0,\r\n}: Partial<MouseEvent>) {\r\n  if (type === 'pointerdown') {\r\n    const r = (el as Element)?.closest?.('dialog')?.getBoundingClientRect();\r\n    const isInside =\r\n      r && r.top <= y && y <= r.bottom && r.left <= x && x <= r.right;\r\n\r\n    DOWN_INSIDE = !!isInside;\r\n  } else {\r\n    const isDialog = el instanceof HTMLDialogElement;\r\n    const isClose = isDialog && !DOWN_INSIDE && attr(el, 'closedby') === 'any';\r\n\r\n    DOWN_INSIDE = false; // Reset on every pointerup\r\n    if (isClose) requestAnimationFrame(() => el.open && el.close()); // Close if browser did not do it\r\n  }\r\n}\r\n\r\nonHotReload('dialog-closedby', () => [\r\n  on(document, 'pointerdown pointerup', handleClosedbyAny, QUICK_EVENT),\r\n]);\r\n"],"mappings":";;;AAKA,IAAI,cAAc;AAClB,SAAS,kBAAkB,EACzB,MACA,QAAQ,IACR,SAAS,IAAI,GACb,SAAS,IAAI,KACS;AACtB,KAAI,SAAS,eAAe;EAC1B,MAAM,IAAK,IAAgB,UAAU,SAAS,EAAE,uBAAuB;AAIvE,gBAAc,CAAC,EAFb,KAAK,EAAE,OAAO,KAAK,KAAK,EAAE,UAAU,EAAE,QAAQ,KAAK,KAAK,EAAE;QAGvD;EAEL,MAAM,UADW,cAAc,qBACH,CAAC,eAAeA,mBAAK,IAAI,WAAW,KAAK;AAErE,gBAAc;AACd,MAAI,QAAS,6BAA4B,GAAG,QAAQ,GAAG,OAAO,CAAC;;;AAInEC,0BAAY,yBAAyB,CACnCC,iBAAG,UAAU,yBAAyB,mBAAmBC,0BAAY,CACtE,CAAC"}