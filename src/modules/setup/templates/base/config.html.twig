{# Config template #}
{% block header %}
<form method="POST" action="{{ action_url | raw }}">
	<table class="pure-table pure-form">
		<tr class="th">
			<td colspan="2">&nbsp;{{ title }}</td>
		</tr>

{% endblock %}

		{% block body %}
		<tr class="th">
			<td colspan="2">
				&nbsp;<b>{{ lang('Path_information') }}</b>
				<input type="hidden" name="newsettings[freshinstall]" value="0">
			</td>
		</tr>
		<tr>
			<td>{{ lang('Enter_the_full_path_for_temporary_files') }}.<br>{{ lang('Examples') }} /tmp, C:\TEMP</td>
			<td><input name="newsettings[temp_dir]" value="{{ value_temp_dir|raw }}" size="40" class="pure-u-7-8"></td>
		</tr>

		<tr>
			<td>{{ lang('Enter_the_full_path_for_users_and_group_files') }}.<br>{{ lang('Examples') }} /files, _E:\FILES}<br><strong>{{ lang('This_has_to_be_outside_the_webservers_document_root') }}</strong><br>{{ lang('or') }} http://webdav.domain.com (WebDAV):</td>
			<td><input name="newsettings[files_dir]" value="{{ value_files_dir|raw }}" size="40" class="pure-u-7-8">
			</td>
		</tr>

		<tr>
			<td>{{ lang('Enter_the_location_of_phpGroupWare\'s_URL') }}.<br>{{ lang('Example:') }} http://www.domain.com/portico {{ lang('or') }} /portico<br><b>{{ lang('No_trailing_slash') }}</b>:</td>
			<td><input name="newsettings[webserver_url]" value="{{ value_webserver_url|raw }}" size="40" class="pure-u-7-8">
			</td>
		</tr>

		<tr class="th">
		        <td colspan="2">&nbsp;<b>{{ lang('Host_information') }}</b></td>    </tr>
				   {# lang_Host_information section #}

		<tr>
			<td>{{ lang('Enter_the_hostname_of_the_machine_on_which_this_server_is_running') }}:</td>
			<td><input name="newsettings[hostname]" value="{{ value_hostname|raw }}" class="pure-u-7-8">
			</td>
		</tr>


		<tr>
			<td>{{ lang('enforce_ssl') }}:</td>
			<td>
				<select name="newsettings[enforce_ssl]" class="pure-u-7-8">
					<option value="">{{ lang('No') }}</option>
					<option value="1"{{ selected_enforce_ssl_1|raw }}>{{ lang('Yes') }}</option>
				</select>
			</td>
		</tr>

		<tr>
			<td>{{ lang('cookie domain for sessions - if unsure leave empty') }}</td>
			<td><input name="newsettings[cookie_domain]" value="{{ value_cookie_domain|raw }}" class="pure-u-7-8">
			</td>
			<!--
				 <td>
				   <select name="newsettings[cookie_domain]">
					 {{ hook_cookie_domain }}
				   </select>
				 </td>
			-->
		</tr>
		<tr>
			<td>{{ lang('alternative_cookie_domain_for_sessions_') }}</td>
			<td><input name="newsettings[alternative_cookie_domain]" value="{{ value_alternative_cookie_domain|raw }}" class="pure-u-7-8">
			</td>
		</tr>

		<tr>
			<td>{{ lang('Enter_your_default_FTP_server') }}:</td>
			<td><input name="newsettings[default_ftp_server]" value="{{ value_default_ftp_server|raw }}" class="pure-u-7-8">
			</td>
		</tr>

		<tr>
			<td>{{ lang("Attempt to use correct mimetype for FTP instead of default 'application/octet-stream") }}:</td>
			<td>
				<select name="newsettings[ftp_use_mime]" class="pure-u-7-8">
					<option value="">{{ lang('No') }}</option>
					<option value="True"{{ selected_ftp_use_mime_True|raw }}>{{ lang('Yes') }}</option>
				</select>
			</td>
		</tr>

		<tr>
			<td>{{ lang('Datetime port') }}.<br>{{ lang('If using port 13, please set firewall rules appropriately before submitting this page') }}.({{ lang('Host') }}: time-a.nist.gov {{ lang('Port') }}: 13)</td>
			<td>
				<select name="newsettings[daytime_port]" class="pure-u-7-8">
					<option value="00"{{ selected_daytime_port_00|raw }}>{{ lang('00_(disable)') }}</option>
					<option value="13"{{ selected_daytime_port_13|raw }}>{{ lang('13_(ntp)') }}</option>
					<option value="80"{{ selected_daytime_port_80|raw }}>{{ lang('80_(http)') }}</option>
				</select>
			</td>
		</tr>

		<tr>
			<td>{{ lang('Enter_your_HTTP_proxy_server') }}:</td>
			<td><input name="newsettings[httpproxy_server]" value="{{ value_httpproxy_server|raw }}" class="pure-u-7-8">
			</td>
		</tr>

		<tr>
			<td>{{ lang('Enter_your_HTTP_proxy_server_port') }}:</td>
			<td><input name="newsettings[httpproxy_port]" value="{{ value_httpproxy_port|raw }}" class="pure-u-7-8">
			</td>
		</tr>
		<!--
		   <tr>
			<td>{{ lang('Enter_the_site_username_for_peer_servers') }}.</td>
			<td><input name="newsettings[site_username]" value="{{ value_site_username|raw }}"></td>
		   </tr>

		   <tr>
			<td>{{ lang('Enter_the_site_password_for_peer_servers') }}.</td>
			<td><input type="password" name="newsettings[site_password]" value="{{ value_site_password|raw }}"></td>
		   </tr>
		-->
		<tr>
			<td colspan="2">&nbsp;</td>
		</tr>

		<!-- from admin -->

		<tr class="th">
		       <td colspan="2">&nbsp;<b>{{ lang('Authentication / Accounts') }}</b></td>
		</tr>

		<tr>
			<td>{{ lang('Select_which_type_of_authentication_you_are_using') }}:</td>
			<td>
				<select name="newsettings[auth_type]" class="pure-u-7-8">
					<option value="sql"{{ selected_auth_type_sql|raw }}> {{ lang('SQL') }}: </option>
					<option value="sqlssl"{{ selected_auth_type_sqlssl|raw }}>SQL / SSL</option>
					<option value="ldap"{{ selected_auth_type_ldap|raw }}> {{ lang('LDAP') }}: </option>
					<option value="mail"{{ selected_auth_type_mail|raw }}> {{ lang('Mail') }}: </option>
					<option value="ntlm"{{ selected_auth_type_ntlm|raw }}> {{ lang('NTLM') }}: </option>
					<option value="exchange"{{ selected_auth_type_exchange|raw }}>exchange</option>
					<option value="ads"{{ selected_auth_type_ads|raw }}>ads</option>
					<option value="remoteuser"{{ selected_auth_type_remoteuser|raw }}> {{ lang('Remote User') }}: </option>
					<option value="customsso"{{ selected_auth_type_customsso|raw }}> {{ lang('Custom SSO') }}: </option>
					<option value="azure"{{ selected_auth_type_azure|raw }}> {{ lang('Azure AD') }}: </option>
					<!-- <option value="http"{{ selected_auth_type_http|raw }}> {{ lang('HTTP') }}: </option> -->
					<!-- <option value="nis"{{ selected_auth_type_nis|raw }}> {{ lang('NIS') }}: </option> -->
					<!-- <option value="pam"{{ selected_auth_type_pam|raw }}>PAM (Not Ready)</option> -->
				</select>
			</td>
		</tr>

		<tr>
			<td>{{ lang('Select_if_you_want_a_fallback') }}</td>
			<td>
				<select name="newsettings[half_remote_user]" class="pure-u-7-8">
					<option value=""{{ selected_half_remote_user_|raw }}>{{ lang('Only_the_selected_Auth_Type') }}</option>
					<option value="remoteuser"{{ selected_half_remote_user_remoteuser|raw }}>{{ lang('Allow_Remote_User_As_FallBack') }}</option>
				</select>
		</tr>

		<tr>
			<td>{{ lang('Select where you want to store/retrieve user accounts') }}:</td>
			<td>
				<select name="newsettings[account_repository]" class="pure-u-7-8">
					<option value="sql"{{ selected_account_repository_sql|raw }}> {{ lang('SQL') }}: </option>
					<option value="ldap"{{ selected_account_repository_ldap|raw }}> {{ lang('LDAP') }}: </option>
					<option value="sqlldap"{{ selected_account_repository_sqlldap|raw }}>SQL - replicate changes to LDAP</option>
					<option value="contacts"{{ selected_account_repository_contacts|raw }} style="text-decoration: line-through;">Contacts - DEPRECATED</option>
				</select>
			</td>
		</tr>

		<tr>
			<td>{{ lang('Minimum account id (e.g. 500 or 1000, etc.)') }}:</td>
			<td><input name="newsettings[account_min_id]" value="{{ value_account_min_id|raw }}" class="pure-u-7-8">
			</td>
		</tr>
		<tr>
			<td>{{ lang('Maximum account id (e.g. 65535 or 1000000)') }}:</td>
			<td><input name="newsettings[account_max_id]" value="{{ value_account_max_id|raw }}" class="pure-u-7-8">
			</td>
		</tr>

		<tr>
			<td>{{ lang('Minimum group id (e.g. 100 or 500, etc.) - should not overlap with account ids') }}:</td>
			<td><input name="newsettings[group_min_id]" value="{{ value_group_min_id|raw }}" class="pure-u-7-8">
			</td>
		</tr>
		<tr>
			<td>{{ lang('Maximum group id (e.g. 499 or 999) - should not overlap with account ids') }}:</td>
			<td><input name="newsettings[group_max_id]" value="{{ value_group_max_id|raw }}" class="pure-u-7-8">
			</td>
		</tr>

		<tr>
			<td>{{ lang('Auto_create_account_records_for_authenticated_users') }}:</td>
			<td>
				<select name="newsettings[auto_create_acct]" class="pure-u-7-8">
					<option value="">{{ lang('No') }}</option>
					<option value="True"{{ selected_auto_create_acct_True|raw }}>{{ lang('Yes') }}</option>
				</select>
			</td>
		</tr>

		<tr>
			<td>{{ lang('Auto-created user accounts expire') }}:</td>
			<td>
				<select name="newsettings[auto_create_expire]" class="pure-u-7-8">
					<option value="604800"{{ selected_auto_create_expire_604800|raw }}>{{ lang('one_week') }}</option>
					<option value="1209600"{{ selected_auto_create_expire_1209600|raw }}>{{ lang('two_weeks') }}</option>
					<option value="2592000"{{ selected_auto_create_expire_2592000|raw }}>{{ lang('one_month') }}</option>
					<option value="never"{{ selected_auto_create_expire_never|raw }}>{{ lang('Never') }}</option>
				</select>
			</td>
		</tr>


		<tr>
			<td>{{ lang('Add auto-created users to this group (\'Default\' will be attempted if this is empty.)') }}:</td>
			<td>
				<select name="newsettings[default_group_lid]" class="pure-u-7-8">
					{{ hook('required_group') }}
				</select>
			</td>
		</tr>

		<tr>
			<td>{{ lang('If_no_ACL_records_for_user_or_any_group_the_user_is_a_member_of') }}:</td>
			<td>
				<select name="newsettings[acl_default]" class="pure-u-7-8">
					<option value="deny"{{ selected_acl_default_deny|raw }}>{{ lang('Deny_Access') }}</option>
					<option value="grant"{{ selected_acl_default_grant|raw }}>{{ lang('Grant_Access') }}</option>
				</select>
			</td>
		</tr>

		<tr>
			<td>{{ lang('password_encryption_type') }}:</td>
			<td>
				<select name="newsettings[encryption_type]" class="pure-u-7-8">
					{{ hook('passwdhashes') }}
				</select>
			</td>
		</tr>

		<tr>
			<td>{{ lang('password_password_level') }}:</td>
			<td>
				<select name="newsettings[password_level]" class="pure-u-7-8">
					{{ hook('passwdlevels') }}
				</select>
			</td>
		</tr>

		<tr>
			<td colspan="2">&nbsp;</td>
		</tr>

		<tr class="th">
			<td colspan="2"><b>{{ lang('If_using_LDAP') }}:</b></td>
		<tr>

		<tr>
			<td>{{ lang('Do you want to manage homedirectory and loginshell attributes?') }}:</td>
			<td>
				<select name="newsettings[ldap_extra_attributes]" class="pure-u-7-8">
					<option value="">{{ lang('No') }}</option>
					<option value="True"{{ selected_ldap_extra_attributes_True|raw }}>{{ lang('Yes') }}</option>
				</select>
			</td>
		</tr>

		<tr>
			<td>{{ lang('LDAP Default homedirectory prefix (e.g. /home for /home/username)') }}:</td>
			<td><input name="newsettings[ldap_account_home]" value="{{ value_ldap_account_home|raw }}" autocomplete="off"
					   readonly="readonly" onfocus="this.removeAttribute('readonly');" class="pure-u-7-8">
			</td>
		</tr>

		<tr>
			<td>{{ lang('LDAP Default shell (e.g. /bin/bash)') }}:</td>
			<td><input name="newsettings[ldap_account_shell]" value="{{ value_ldap_account_shell|raw }}" class="pure-u-7-8">
			</td>
		</tr>

		<tr>
			<td>{{ lang('LDAP host') }}:</td>
			<td><input name="newsettings[ldap_host]" value="{{ value_ldap_host|raw }}" class="pure-u-7-8">
			</td>
		</tr>

		<tr>
			<td>{{ lang('LDAP_accounts_context') }}:</td>
			<td><input name="newsettings[ldap_context]" value="{{ value_ldap_context|raw }}" size="40" class="pure-u-7-8">
			</td>
		</tr>

		<tr>
			<td>{{ lang('LDAP_groups_context') }}:</td>
			<td><input name="newsettings[ldap_group_context]" value="{{ value_ldap_group_context|raw }}" size="40" class="pure-u-7-8">
			</td>
		</tr>

		<tr>
			<td>{{ lang('LDAP_rootdn') }}:</td>
			<td><input name="newsettings[ldap_root_dn]" value="{{ value_ldap_root_dn|raw }}" size="40" class="pure-u-7-8">
			</td>
		</tr>

		<tr>
			<td>{{ lang('LDAP_root_password') }}:</td>
			<td><input name="newsettings[ldap_root_pw]" type="password" value="{{ value_ldap_root_pw|raw }}" class="pure-u-7-8">
			</td>
		</tr>

		<tr>
			<td colspan="2">&nbsp;</td>
		</tr>

		<tr class="th">
			<td colspan="2">&nbsp;<b>{{ lang('If_using_Remote_User') }}:</b></td>
		</tr>

		<tr>
			<td>{{ lang('mapping_kind') }}:</td>
			<td>
				<select name="newsettings[mapping]" class="pure-u-7-8">
					<option value="id"{{ selected_mapping_id|raw }}>{{ lang('Unique_ID') }}</option>
					<option value="table"{{ selected_mapping_table|raw }}>{{ lang('Table_mapping') }}</option>
					<option value="all"{{ selected_mapping_all|raw }}>{{ lang('All') }}</option>
				</select>
			</td>
		</tr>

		<tr>
			<td>{{ lang('mapping_field') }}:</td>
			<td><input name="newsettings[mapping_field]" value="{{ value_mapping_field|raw }}" size="40" class="pure-u-7-8">
			</td>
		</tr>

		<tr>
			<td colspan="2">&nbsp;</td>
		</tr>

		<tr class="th"> 
		       <td colspan="2">&nbsp;<b>{{ lang('Mcrypt_settings_(requires_mcrypt_PHP_extension)') }}</b></td>
    </tr>

		<tr>
			<td>{{ lang('Enter_some_random_text_for_app_session_encryption') }}:</td>
			<td><input name="newsettings[encryptkey]" value="{{ value_encryptkey|raw }}" size="40" class="pure-u-7-8">
			</td>
		</tr>

		<tr>
			<td>{{ lang('Mcrypt_algorithm_(default_TRIPLEDES)') }}:</td>
			<td>
				<select name="newsettings[mcrypt_algo]" class="pure-u-7-8">
					{{ hook('encryptalgo') }}
				</select>
			</td>
		</tr>

		<tr>
			<td>{{ lang('Mcrypt_mode_(default_CBC)') }}:</td>
			<td>
				<select name="newsettings[mcrypt_mode]" class="pure-u-7-8">
					{{ hook('encryptmode') }}
				</select>
			</td>
		</tr>

		<tr>
			<td colspan="2">&nbsp;</td>
		</tr>
		<tr class="th">
			<td colspan="2">&nbsp;<b>{{ lang('Additional_settings') }}:</b></td>
		</tr>
		<tr>
			<td>
				{{ lang('Select_where_you_want_to_store/retrieve_filesystem_information') }}:
				<br>
				({{ lang('file_type,_size,_version,_etc.') }})
			</td>
			<td>
				<select name="newsettings[file_repository]" class="pure-u-7-8">
					<option value="sql"{{ selected_file_repository_sql|raw }}> {{ lang('SQL') }}: </option>
					<option value="dav"{{ selected_file_repository_dav|raw }}> {{ lang('WebDAV') }}: </option>
				</select>
			</td>
		</tr>
		<tr>
			<td>
				{{ lang('Select_where_you_want_to_store/retrieve_file_contents') }}:
				<br>
				({{ lang('Recommended:_Filesystem') }})
			</td>
			<td>
				<select name="newsettings[file_store_contents]" class="pure-u-7-8">
					<option value="filesystem"{{ selected_file_store_contents_filesystem|raw }}> {{ lang('Filesystem') }}: </option>
					<option value="sql"{{ selected_file_store_contents_sql|raw }}> {{ lang('SQL') }}: </option>
					<option value="braArkiv"{{ selected_file_store_contents_braArkiv|raw }}>braArkiv</option>
				</select>
			</td>
		</tr>

		<!-- end from admin -->

		{% endblock %}

		{% block footer %}
		<tr class="th">
			<td colspan="2">
				&nbsp;
			</td>
		</tr>
	</table>
	<div class="button_group">
		<input type="submit" name="submit" value="Submit" class="pure-button"/>
		<input type="submit" name="cancel" value="Cancel" class="pure-button"/>
	</div>
</form>
{% endblock %}


