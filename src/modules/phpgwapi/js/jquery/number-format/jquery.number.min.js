!function(e){"use strict";var t=function(e){return"function"==typeof e};function a(e,t){if(this.createTextRange){var a=this.createTextRange();a.collapse(!0),a.moveStart("character",e),a.moveEnd("character",t-e),a.select()}else this.setSelectionRange&&(this.focus(),this.setSelectionRange(e,t))}function i(e){var t=this.value.length;if(e="start"==e.toLowerCase()?"Start":"End",document.selection){var a,i,n,l=document.selection.createRange();return(a=l.duplicate()).expand("textedit"),a.setEndPoint("EndToEnd",l),n=(i=a.text.length-l.text.length)+l.text.length,"Start"==e?i:n}return void 0!==this["selection"+e]&&(t=this["selection"+e]),t}var n={codes:{46:127,188:44,109:45,190:46,191:47,192:96,220:92,222:39,221:93,219:91,173:45,187:61,186:59,189:45,110:46},shifts:{96:"~",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",48:")",45:"_",61:"+",91:"{",93:"}",92:"|",59:":",39:'"',44:"<",46:">",47:"?"}};e.fn.number=function(t,l,s,r){r=void 0===r?",":r,l=void 0===l?0:l;var h="\\u"+("0000"+(s=void 0===s?".":s).charCodeAt(0).toString(16)).slice(-4),u=new RegExp("[^"+h+"0-9]","g"),o=new RegExp(h,"g");return!0===t?this.is("input:text")?this.on({"keydown.format":function(t){var h=e(this),u=h.data("numFormat"),o=t.keyCode?t.keyCode:t.which,c="",v=i.apply(this,["start"]),d=i.apply(this,["end"]),p="",g=!1;if(n.codes.hasOwnProperty(o)&&(o=n.codes[o]),!t.shiftKey&&o>=65&&o<=90?o+=32:!t.shiftKey&&o>=69&&o<=105?o-=48:t.shiftKey&&n.shifts.hasOwnProperty(o)&&(c=n.shifts[o]),""==c&&(c=String.fromCharCode(o)),8!=o&&45!=o&&127!=o&&c!=s&&!c.match(/[0-9]/)){var f=t.keyCode?t.keyCode:t.which;if(46==f||8==f||127==f||9==f||27==f||13==f||(65==f||82==f||80==f||83==f||70==f||72==f||66==f||74==f||84==f||90==f||61==f||173==f||48==f)&&!0===(t.ctrlKey||t.metaKey)||(86==f||67==f||88==f)&&!0===(t.ctrlKey||t.metaKey)||f>=35&&f<=39||f>=112&&f<=123)return;return t.preventDefault(),!1}if(0==v&&d==this.value.length||0==h.val()?8==o?(v=d=1,this.value="",u.init=l>0?-1:0,u.c=l>0?-(l+1):0,a.apply(this,[0,0])):c==s?(v=d=1,this.value="0"+s+new Array(l+1).join("0"),u.init=l>0?1:0,u.c=l>0?-(l+1):0):45==o?(v=d=2,this.value="-0"+s+new Array(l+1).join("0"),u.init=l>0?1:0,u.c=l>0?-(l+1):0,a.apply(this,[2,2])):(u.init=l>0?-1:0,u.c=l>0?-l:0):u.c=d-this.value.length,u.isPartialSelection=v!=d,l>0&&c==s&&v==this.value.length-l-1)u.c++,u.init=Math.max(0,u.init),t.preventDefault(),g=this.value.length+u.c;else if(45!=o||0==v&&0!=this.value.indexOf("-"))if(c==s)u.init=Math.max(0,u.init),t.preventDefault();else if(l>0&&127==o&&v==this.value.length-l-1)t.preventDefault();else if(l>0&&8==o&&v==this.value.length-l)t.preventDefault(),u.c--,g=this.value.length+u.c;else if(l>0&&127==o&&v>this.value.length-l-1){if(""===this.value)return;"0"!=this.value.slice(v,v+1)&&(p=this.value.slice(0,v)+"0"+this.value.slice(v+1),h.val(p)),t.preventDefault(),g=this.value.length+u.c}else if(l>0&&8==o&&v>this.value.length-l){if(""===this.value)return;"0"!=this.value.slice(v-1,v)&&(p=this.value.slice(0,v-1)+"0"+this.value.slice(v),h.val(p)),t.preventDefault(),u.c--,g=this.value.length+u.c}else 127==o&&this.value.slice(v,v+1)==r?t.preventDefault():8==o&&this.value.slice(v-1,v)==r?(t.preventDefault(),u.c--,g=this.value.length+u.c):l>0&&v==d&&this.value.length>l+1&&v>this.value.length-l-1&&isFinite(+c)&&!t.metaKey&&!t.ctrlKey&&!t.altKey&&1===c.length&&(p=d===this.value.length?this.value.slice(0,v-1):this.value.slice(0,v)+this.value.slice(v+1),this.value=p,g=v);else t.preventDefault();!1!==g&&a.apply(this,[g,g]),h.data("numFormat",u)},"keyup.format":function(t){var n,s=e(this),r=s.data("numFormat"),h=t.keyCode?t.keyCode:t.which,u=i.apply(this,["start"]),o=i.apply(this,["end"]);0!==u||0!==o||189!==h&&109!==h||(s.val("-"+s.val()),u=1,r.c=1-this.value.length,r.init=1,s.data("numFormat",r),n=this.value.length+r.c,a.apply(this,[n,n])),""===this.value||(h<48||h>57)&&(h<96||h>105)&&8!==h&&46!==h&&110!==h||(s.val(s.val()),l>0&&(r.init<1?(u=this.value.length-l-(r.init<0?1:0),r.c=u-this.value.length,r.init=1,s.data("numFormat",r)):u>this.value.length-l&&8!=h&&(r.c++,s.data("numFormat",r))),46!=h||r.isPartialSelection||(r.c++,s.data("numFormat",r)),n=this.value.length+r.c,a.apply(this,[n,n]))},"paste.format":function(t){var a=e(this),i=t.originalEvent,n=null;return window.clipboardData&&window.clipboardData.getData?n=window.clipboardData.getData("Text"):i.clipboardData&&i.clipboardData.getData&&(n=i.clipboardData.getData("text/plain")),a.val(n),t.preventDefault(),!1}}).each(function(){var t=e(this).data("numFormat",{c:-(l+1),decimals:l,thousands_sep:r,dec_point:s,regex_dec_num:u,regex_dec:o,init:!!this.value.indexOf(".")});""!==this.value&&t.val(t.val())}):this.each(function(){var t=e(this),a=+t.text().replace(u,"").replace(o,".");t.number(isFinite(a)?+a:0,l,s,r)}):this.text(e.number.apply(window,arguments))};var l=null,s=null;e.isPlainObject(e.valHooks.text)?(t(e.valHooks.text.get)&&(l=e.valHooks.text.get),t(e.valHooks.text.set)&&(s=e.valHooks.text.set)):e.valHooks.text={},e.valHooks.text.get=function(a){var i,n=e(a).data("numFormat");return n?""===a.value?"":(i=+a.value.replace(n.regex_dec_num,"").replace(n.regex_dec,"."),(0===a.value.indexOf("-")?"-":"")+(isFinite(i)?i:0)):t(l)?l(a):void 0},e.valHooks.text.set=function(a,i){var n=e(a).data("numFormat");if(n){var l=e.number(i,n.decimals,n.dec_point,n.thousands_sep);return a.value=l}return t(s)?s(a,i):void 0},e.number=function(e,t,a,i){i=void 0===i?",":i,a=void 0===a?".":a,t=isFinite(+t)?Math.abs(t):0;var n="\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4),l="\\u"+("0000"+i.charCodeAt(0).toString(16)).slice(-4);e=(e+"").replace(".",a).replace(new RegExp(l,"g"),"").replace(new RegExp(n,"g"),".").replace(new RegExp("[^0-9+-Ee.]","g"),"");var s=isFinite(+e)?+e:0,r="";return r=(t?function(e,t){var a=Math.pow(10,t);return""+Math.round(e*a)/a}(s,t):""+Math.round(s)).split("."),r[0].length>3&&(r[0]=r[0].replace(/\B(?=(?:\d{3})+(?!\d))/g,i)),(r[1]||"").length<t&&(r[1]=r[1]||"",r[1]+=new Array(t-r[1].length+1).join("0")),r.join(a)}}(jQuery);