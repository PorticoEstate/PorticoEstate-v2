{"version":3,"file":"error-summary.js","names":[],"sources":["../../src/error-summary.ts"],"sourcesContent":["import { attr, DSElement, off, on, QUICK_EVENT, useId } from './utils';\r\n\r\ndeclare global {\r\n  interface HTMLElementTagNameMap {\r\n    'ds-error-summary': DSErrorSummaryElement;\r\n  }\r\n}\r\n\r\nexport class DSErrorSummaryElement extends DSElement {\r\n  connectedCallback() {\r\n    on(this, 'animationend', this, QUICK_EVENT); // Using animationend to detect when element is visible\r\n    requestAnimationFrame(() => this.handleEvent({ target: this })); // Initial setup when children has rendered\r\n  }\r\n  handleEvent({ target }: Partial<Event>) {\r\n    if (target !== this) return; // Ignore if animation event was triggered by child\r\n    const heading = this.querySelector('h2,h3,h4,h5,h6');\r\n    if (heading) attr(heading, 'aria-labelledby', useId(heading));\r\n    attr(this, 'tabindex', '-1');\r\n    this.focus();\r\n  }\r\n  disconnectedCallback() {\r\n    off(this, 'animationend', this, QUICK_EVENT);\r\n  }\r\n}\r\n\r\ncustomElements.define('ds-error-summary', DSErrorSummaryElement);\r\n"],"mappings":";;;AAQA,IAAa,wBAAb,cAA2C,UAAU;CACnD,oBAAoB;AAClB,KAAG,MAAM,gBAAgB,MAAM,YAAY;AAC3C,8BAA4B,KAAK,YAAY,EAAE,QAAQ,MAAM,CAAC,CAAC;;CAEjE,YAAY,EAAE,UAA0B;AACtC,MAAI,WAAW,KAAM;EACrB,MAAM,UAAU,KAAK,cAAc,iBAAiB;AACpD,MAAI,QAAS,MAAK,SAAS,mBAAmB,MAAM,QAAQ,CAAC;AAC7D,OAAK,MAAM,YAAY,KAAK;AAC5B,OAAK,OAAO;;CAEd,uBAAuB;AACrB,MAAI,MAAM,gBAAgB,MAAM,YAAY;;;AAIhD,eAAe,OAAO,oBAAoB,sBAAsB"}