{"version":3,"file":"details.cjs","names":["isBrowser","onMutation"],"sources":["../../src/details.ts"],"sourcesContent":["import { attr, isBrowser, onHotReload, onMutation } from './utils';\r\n\r\n// Polyfill for Android Firefox not supporting details/summary accessibility properly\r\nconst IS_ANDROID_FIREFOX =\r\n  isBrowser() &&\r\n  /android/i.test(navigator.userAgent) &&\r\n  /firefox/i.test(navigator.userAgent);\r\nconst SUMMARYS = IS_ANDROID_FIREFOX\r\n  ? document.getElementsByTagName('summary')\r\n  : [];\r\n\r\nfunction handleAriaPolyfill() {\r\n  for (const summary of SUMMARYS) {\r\n    const open = !!(summary.parentElement as HTMLDetailsElement)?.open;\r\n    attr(summary, 'role', 'button');\r\n    attr(summary, 'aria-expanded', `${open}`);\r\n  }\r\n}\r\n\r\nif (IS_ANDROID_FIREFOX)\r\n  onHotReload('details-android-firefox', () => [\r\n    onMutation(document, handleAriaPolyfill, {\r\n      attributeFilter: ['open'],\r\n      attributes: true,\r\n      childList: true,\r\n      subtree: true,\r\n    }),\r\n  ]);\r\n"],"mappings":";;;AAGA,MAAM,qBACJA,yBAAW,IACX,WAAW,KAAK,UAAU,UAAU,IACpC,WAAW,KAAK,UAAU,UAAU;AACtC,MAAM,WAAW,qBACb,SAAS,qBAAqB,UAAU,GACxC,EAAE;AAEN,SAAS,qBAAqB;AAC5B,MAAK,MAAM,WAAW,UAAU;EAC9B,MAAM,OAAO,CAAC,CAAE,QAAQ,eAAsC;AAC9D,qBAAK,SAAS,QAAQ,SAAS;AAC/B,qBAAK,SAAS,iBAAiB,GAAG,OAAO;;;AAI7C,IAAI,mBACF,2BAAY,iCAAiC,CAC3CC,yBAAW,UAAU,oBAAoB;CACvC,iBAAiB,CAAC,OAAO;CACzB,YAAY;CACZ,WAAW;CACX,SAAS;CACV,CAAC,CACH,CAAC"}