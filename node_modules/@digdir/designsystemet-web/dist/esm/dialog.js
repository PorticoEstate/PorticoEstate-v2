import { QUICK_EVENT, attr, on, onHotReload } from "./utils.js";

//#region src/dialog.ts
let DOWN_INSIDE = false;
function handleClosedbyAny({ type, target: el, clientX: x = 0, clientY: y = 0 }) {
	if (type === "pointerdown") {
		const r = el?.closest?.("dialog")?.getBoundingClientRect();
		DOWN_INSIDE = !!(r && r.top <= y && y <= r.bottom && r.left <= x && x <= r.right);
	} else {
		const isClose = el instanceof HTMLDialogElement && !DOWN_INSIDE && attr(el, "closedby") === "any";
		DOWN_INSIDE = false;
		if (isClose) requestAnimationFrame(() => el.open && el.close());
	}
}
onHotReload("dialog-closedby", () => [on(document, "pointerdown pointerup", handleClosedbyAny, QUICK_EVENT)]);

//#endregion
//# sourceMappingURL=dialog.js.map